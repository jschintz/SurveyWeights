# SurveyWeights
Collection of STATA scripts to aid in the analysis of survey data on consumer financial health:
The survey weight process in these scripts allows for a quick build, but still imposing rigor so as to avoid the weighting optimization landing on a local maxima.  
The project was built with intent that beginner analysts can reuse scripts in a semi-automated fashion, to be later reviewed with subject matter expert in survey analysis and weighting design.  

Critical steps of the process include:
* take survey responses and cleanse/standardize the data
* apply a financial health score to each respondent
* construct survey weights to assure a representative sample
* output data-dredged crosstabs.  

| #      | Script location                          | Description                                                                                                                                                 | Analyst Touch   Points                                                                                                                                           | Analyst action   items for project team                                                                                                                                                                                                                        | Inputs?                                        |
|--------|------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
| Step 1 | Scripts\Step1_TTSurveyStandardization.do | Initial   data processing of survey monkey data.    File is imported, values are converted to numeric with labels,  nulls are reported, & nulls are dropped | Analyst   needs to provide:   import command for   Survey file, define the names of the variables.                                                               | Report   survey nulls to project lead.                                                                                                                                                                                                                         | Survey Data                                    |
| Step 2 | Scripts\Step2_TTSurveyStandardization.do | Create   finhealth typing.  Results from step 1   are typed into one of seven finhealth segments                                                            | None                                                                                                                                                             | Analyst   needs to confirm that typing steps contain no errors as defined on worksheet   "Typing Steps QC".  Any   errors should be consulted with data manager and corrected. Report summary of   confidence % for typing.                                    | "Outputs\Step1.dta"                            |
| Step 3 | Scripts\Step3_TTSurveyStandardization.do | Save   benchmark file to ".dta" file type and rename, recode, or relabel   any necessary labels.                                                            | Analyst   needs to provide:   import command for   benchmark file, define the names of the variables, assigns codes & labels   to text fields.                   | Report   benchmark file nulls to project lead.                                                                                                                                                                                                                 | Benchmark Data                                 |
| Step 4 | Scripts\Step4_TTSurveyStandardization.do | Create survey   weights.                                                                                                                                    | Analyst   must define product and demographic variable to be used for weighting.                                                                                 | Analyst   needs to provide reccomendation to project lead about which weight is   best.  Analyst must interpret results   from the 7 default weight options.    Differences in Finhealth outcomes should be a red flag that the   weighting has peculiarities. | "Outputs\Step2.dta"   & "Outputs\Step3.dta"    |
| Step 5 | Scripts\Step5_TTSurveyStandardization.do | Create outputs for   preliminary results report                                                                                                             | None                                                                                                                                                             | Analyst   must combine/format results according to project lead specification.  Analyst should review results for errors,   inconsistencies, interesting data points.                                                                                          | "Outputs/Step4.dta"                            |
| Step 6 | Scripts\Step6_TTSurveyStandardization.do | Creates banners                                                                                                                                             | Analyst   must define which variables are to be used for columns, and which variables   are to be used for worksheets.                                           | QC a few results by   hand.  Send results to project team.                                                                                                                                                                                                     | "Outputs/Step4.dta"                            |
| Step 7 | Scripts\Step7_TTSurveyStandardization.do | Create charts for PPT   deck                                                                                                                                | Analyst   must define which variables are to be used in charts that compare CFHS to   Survey.  Analyst must define which CFHS   metric to use (eg. West Banked). | QC   a few charts by hand.  Hit the refresh   button inside PPT to update the charts.                                                                                                                                                                          | "Outputs/Step4.dta"   & "CFHS/CFHSDataSet.dta" |
